<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

     <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
     
    <link rel="stylesheet" href="css/iconfont.css">
    <link rel="stylesheet" href="css/register.css">
    <link rel="stylesheet" href="css/clickCheck.css">
    <link rel="stylesheet" href="css/style.css">
    <title>会员注册</title>
</head>
<body>
	
<!-- nav -->
<div class="header">
	
</div>

<!-- contain -->
<div class="contain">
    <div class="regBox">
        <h1>注册成为会员</h1>
        <span>注册即可尊享：</span>
    </div>
    <div class="regVip">
        <ul>
            <li>-&nbsp;&nbsp;&nbsp;官网专属礼遇</li>
            <li>-&nbsp;&nbsp;&nbsp;最新活动资讯</li>
            <li>-&nbsp;&nbsp;&nbsp;收藏您喜爱的产品、文章</li>
        </ul>
    </div>

    <form class="regForm">
        <div class="formRow regRow">
            <span>手机</span>
            <span class="required">*</span>
            <br>
            <input type="text" id="userTel" name="userTel"  class="inputText"><span style="font-size: 12px;"></span>
            <span id="r1"></span>
        </div>
        <div class="formRow">
                <span>姓名</span>
                <span class="required">*</span>
                <br>
                <input type="text" id="userId" name="userId" autocomplete="off" maxlength="8" class="inputText">
                <span id="r2"></span>
        </div>
        <div class="widgets__img_check_box" id="select" style="width:400px;top:2px;">
            <p>拖动下方滑块完成拼图</p>                       
                <div class="widgets__img_display">
                    <div class="widgets__img_cnt">
                        <img src1="a.jpg" class="widgets__img_src" />
                        <canvas class="widgets__img_fragment_hollow"></canvas>
                        <div class="widgets__img_fragment_cnt">
                            <canvas class="widgets__img_fragment widgets__img_fragment_shadow"></canvas>
                            <canvas class="widgets__img_fragment widgets__img_fragment_content"></canvas>
                        </div>
                        <div class="widgets__icon_refresh"></div>
                    </div>                
                </div>            
                <div class="widgets__smooth_cnt">
                    <div class="widgets__smooth_bar"></div>
                    <div class="widgets__smooth_circle"></div>
                </div>
        </div>
        <div class="formRow">
                <span>短信验证码</span>
                <span class="required">*</span>
                <br>
                <div class="form1">
                    <input type="text" class="inputText verCode">
                    <div class="regBtn">
                        <div class="wrap">
                            <button type="button" id="btnLogin" class="primary large data-field">获取短信验证码</button>
                        </div>
                    </div>
                </div>
                <span id="3"></span>
        </div>
        <div class="form1">
            <div class="formRow regRow">
                    <span>密码</span>
                    <span class="required">*</span>
                    <br>
                    <input type="password" name="userpass" id="userpass" class="inputText">
                    <span id="4"></span>
            </div>
            <div class="formRow">
                    <span>确认密码</span>
                    <span class="required">*</span>
                    <br>
                    <input type="password" name="pwd_again" id="pwd_again" class="inputText"> 
                    <span id="5"></span>               
            </div>
        </div>
        <p>*最少8个字符，至少包含1个数字，1个英文字符</p>
        <label for="" class="formCheck"><input type="checkbox" id="agree">我同意收集和处理我的个人数据将符合资生堂
            <a href="#">隐私政策</a>，并且我同意我对本网站的使用将遵守这些<br> <a href="#">条款和条件</a>.
        </label>
        <div id="messageBox" style="width: 500px;color: #c8102e;text-align: center;"></div>
        <div class="centerer">
            <div class="wrap">
                <button type="button" id="btn" class="primary large data-field" style="width: 330px;disabled:true">立即注册</button>
            </div>
        </div>
    </form>

</div>

<!-- 底部 -->  
<div class="footer">
        <div class="lay1">
            <div class="row">
    
                <div class="col-md-4">
                        <div class="title">
                            <h3>联系我们</h3>
                        </div>
                    <div class="contains">
                        <a href="#" class="chat">
                            <i class="iconfont icon-chat"></i>
                            <span>在线咨询</span>
                        </a>
                        <a href="#" class="tel">
                            <i class="iconfont icon-phone"></i>
                            <span>400-821-6076</span>
                        </a>
                    </div>
                    
                </div>
    
                <div class="col-md-4">
                        <div class="title">
                            <h3>关注我们</h3>
                        </div>
                    <div class="contains">
                        <a href="#" class="wechat">
                            <i class="iconfont icon-we-chat"></i>
                        </a>
                        <a href="#" class="weibo">
                            <i class="iconfont icon-weibo"></i>
                        </a>
                        <a href="#" class="redbook">
                            <i class="iconfont icon-xiaohongshu"></i>
                        </a>
                    </div>
                </div>
                <div class="col-md-4">
                        <div class="title">
                            <h3>寻找专柜</h3>
                        </div>
                    <div class="contains">
                        <a href="#" class="home">
                            <i class="iconfont icon-home"></i>
                            <span>专柜查询</span>
                        </a>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="lay2">
            <div class="row">
                <div class="col-md-4">
                    <div class="contains">
                        <h5>关于我们</h5>
                        <ul>
                            <li>
                                <a href="#">品牌故事</a>
                            </li>
                            <li>
                                <a href="#">官网购物理由</a>
                            </li>
                            <li>
                                <a href="#">品牌资讯</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-4">                
                    <div class="contains">
                        <h5>明星产品</h5>
                        <ul>
                            <li>
                                <a href="#">查看所有</a>
                            </li>
                            <li>
                                <a href="#">「傲娇精华」红妍肌活精华露</a>
                            </li>
                            <li>
                                <a href="#">「蓝胖子」新艳阳夏臻效水动力防晒乳</a>
                            </li>
                            <li>
                                <a href="#">「细管唇膏」沁色绚彩唇膏</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-4">                
                        <div class="contains">
                            <h5>帮助中心</h5>
                            <ul>
                                <li>
                                    <a href="#">常见问题</a>
                                </li>
                                <li>
                                    <a href="#">退换货政策</a>
                                </li>
                                <li>
                                    <a href="#">订单查询</a>
                                </li>
                                <li>
                                    <a href="#">网站地图</a>
                                </li>
                            </ul>
                        </div>
                    </div>
            </div>
        </div>
        <div class="lay3">
            <a href="https://www.shiseido.com.cn/terms-of-use.html">使用条款</a>
            <a href="https://www.shiseido.com.cn/privacy-policy.html">隐私政策</a>
            <a href="https://www.shiseido.com.cn/license.html">上海工商</a>
            <a href="http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action;jsessionid=HYQG0rZBcOGhUvypcwqtPI3ahZUmkwGDDhKPyb2_P6hwwEn8UwU4!821559948">沪ICP备10203872号-1</a>
            <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011502007430">沪公网安备 31011502007430号</a>
            <span>Copyright © 2019 资生堂(中国)投资有限公司</span>
        </div>
    </div>
</body>
</html>
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.js"></script>
<script src="js/clickCheck.js"></script>
<script src="js/register.js"></script>

<script>
//手机号码判断 
 $('.regRow #userTel').blur(function() {
    let r=/^1[3,5,7,8,9]\d{9}$/;
    if($(this).val()==""){
        $("#r1").css({'color':'#c8102e','font-size':'12px',fontSize:'14px'});
        $("#r1").text("请输入一个有效的电话号码");
        }else{
            $("#r1").text("");
		$(this).css({border:'1px solid #ccc'});
        }
    if (r.test($(this).val())){
    }else{
		console.log(r.test($(this).val()));
		$(this).css({border:"1px solid #c8102e"})
        $("#r1").css({'color':'#c8102e','font-size':'14px'});
        $("#r1").text("请输入一个有效的电话号码");
    }
   })

// 姓名判断
   $('#userId').blur(function() {
    let r=/^[a-zA-Z]{2,8}$/
    if($(this).val()==""){
        $("#r2").css({'color':'#c8102e','font-size':'14px'});
        $("#r2").text("请输入一个有效的姓");
        }else{
            $("#r2").text("");
			$(this).css({border:'1px solid #ccc'});
        }
    if (r.test($(this).val())){
       
    }else{
		$(this).css({border:"1px solid #c8102e"})
        $("#r2").css({'color':'#c8102e','font-size':'14px'});
        $("#r2").text("请输入一个有效的姓");
    }
   })
//获取验证码
		var num = "";
	$("#btnLogin").click(function(){
		num = "";
		for(var i=0;i<6;i++){
			num += Math.floor(Math.random()*10);
		}
		alert(num);
	})

// 验证码判断
   $('.verCode').blur(function() {
       let r=/^\d{6}$/
    if($(this).val()==""){
		$(this).css({border:"1px solid #c8102e"})
        $("#3").css({'color':'#c8102e','font-size':'14px'});
        $("#3").text("请输入一个有效的校验码");
		
        }else if($(this).val() != num){
			$(this).css({border:"1px solid #c8102e"})
			$("#3").css({'color':'#c8102e','font-size':'14px'});
            $("#3").text("输入的校验码不正确")
        }else{
			$(this).css({border:"1px solid #ccc"})
			$("#3").css({'color':'#c8102e','font-size':'14px'});
            $("#3").text("")
		}
    if (r.test($(this).val())){
       
    }else{
		$("#userTel").css({border:"1px solid #c8102e"})
        $("#3").css({'color':'#c8102e','font-size':'14px'});
        $("#3").text("输入的校验码不正确");
    }
   })

// 密码判断   
   $('.regRow #userpass').blur(function() {
    let r=/^(?=.*[a-zA-Z])(?=.*\d)[^]{8,}$/
    if($(this).val()==""){
		$(this).css({border:"1px solid #c8102e"});
        $("#4").css({'color':'#c8102e','font-size':'14px'});
        $("#4").text("请输入一个有效的密码");
        }else{
            $("#4").text("");
		$(this).css({border:"1px solid #ccc"});
        }
    if (r.test($(this).val())){
       
    }else{
		$(this).css({border:"1px solid #c8102e"});
        $("#4").css({'color':'#c8102e','font-size':'14px'});
        $("#4").text("请输入一个有效的密码");
    }
   })
   $('#pwd_again').blur(function() {
        if($(this).val()==""){
            $("#5").css({'color':'#c8102e','font-size':'14px'});
            $("#5").text("请确认您的密码");
            }  
    if($(this).val()!= $('.regRow #userpass').val()){
			$(this).css({border:'1px solid #c8102e'});
			$("#userpass").css({border:'1px solid #c8102e'});
            $("#5").css({'color':'#c8102e','font-size':'14px'});
            $("#5").text("密码不匹配");
        }else{
			$(this).css({border:'1px solid #ccc'});
			$("#userpass").css({border:'1px solid #ccc'});
            $("#5").text("")
        }
    })
        

$("#btn").click(function(){ 
   
    if($("#agree").is(":checked") && ($(".regRow #userTel").val()!=="") && ($("#userId").val()!=="") && ($(".regRow #userpass").val()!=="")){
        //1、
    var xhr = new XMLHttpRequest();

    xhr.open("POST","regSave.php",true);

    xhr.onreadystatechange = function(){
        if(xhr.readyState==4 && xhr.status==200){
            if(xhr.responseText=="-1"){
                $("#r1").css({'color':'#c8102e',fontSize:'14px'});
                $("#r1").text("您的手机号已经被注册");
            }else if(xhr.responseText=="0"){
                $(".regForm #messageBox").css({'color':'#c8102e'});
                $(".regForm #messageBox").text("注册失败");
            }else if(xhr.responseText=="1"){
                $(".regForm #messageBox").css({'color':'green'});
                $(".regForm #messageBox").text("注册成功，正在跳转登录页面");
                $(window).attr('location','checkout.html');
            }
        }
    }
    //post方式：设置请求头
    xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    //post方式：把传给服务器端数据（键值对）放在send函数的参数里。
    let sendstr = `userTel=${$(".regRow #userTel").val()}&userId=${$("#userId").val()}&userpass=${$(".regRow #userpass").val()}`;
    xhr.send(sendstr);
    }else{
		$('input').each(function(){
		    if ($.trim($(this).val()) == '') {
		        $(this).css('border', '1px solid #c8102e');
		    }
			if ($("#agree").is(":checked")){
				}else{
					$(".formCheck").css('border', '1px solid #c8102e');
					}
		});
		$(".regForm #messageBox").text("在递交此表格前，请先核对这部分内容");
		// let that = $('input:empty');
		// console.log(that);
		// $(that).css({'border-color':'#c8102e'});
    }
    

})

</script>

<!-- 按钮的点击事件 -->
<script>
	$(function(){
		$("#btnLogin,#btn").attr({'disabled':'disabled'}).css({background:'#666'})
		.hover().css({color:'white'});
		
	})
</script>

<!-- 引用header -->
<script>
	$(function(){
		$(".header").load("head.html");
	})
</script>