<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">	
	<title></title>
	<link rel="stylesheet" href="css/iconfont.css">
	<link rel="stylesheet" href="css/head.css">
</head>
<body>
	<!-- nav -->
	<div class="navMain" id="goTop">
	    <nav>
	        <div class="logo">
	            <a href="index.html"><img src="img/logo.png" alt=""></a>
	        </div>
	        <div class="navCon">
	            <div class="main">
	                <ul class="ul1">
	                    <li class="li1"><a href="#" id="skin">护肤</a></li>
	                    <li class="li2"><a href="#" id="makeUp">彩妆</a></li>
	                    <li><a href="#" id="sunBlock">防晒</a></li>
	                    <li><a href="#" id="men">男士</a></li>
	                    <li class="li3"><a href="#" id="offcial">官网臻享</a></li>
	                    <li><a href="#" id="news">品牌资讯</a></li>
	                </ul>
	            </div>
	            <div class="icon">
	                <ul>
	                    <li>
	                        <a href="http://baidu.com">
	                            <span class="iconfont icon-search"></span>
	                        </a>
	                        
	                    </li>
	                    <li>
	                        <a href="#">
	                        <span class="iconfont icon-pin"></span>
	                        </a>
	                    </li>
	                    <li>
	                        <a class="login_hover">
	                        <span class="iconfont icon-Account"></span>
	                        </a>
	                    </li>
	                    <li>
	                        <a href="#">
	                        <span class="iconfont icon-livechat"></span>
	                        </a>
	                    </li>
	                    <li>
	                        <a href="cart.html">
	                        <span class="iconfont icon-gouwudai"></span>
	                        </a>
	                    </li>
	                </ul>
	            </div>
	        </div>
			
	        
	       <div class="box box1">
	                <ul>
	                    <li class="li4">
							<span>产品类型</span></li><br>
	                    <li class="li5">
							<span>肌肤需求</span></li><br>
	                    <li class="li6">
							<span>产品系列</span></li><br>
						<li class="ul2">
							
						</li>
	                </ul>
					<span class="iconfont icon-close"></span>
	                
	        </div>
	        <div class="box box2">
	            <ul>
	                <li class="li7">
						<span>唇妆</span></li><br>
	                <li class="li8">
						<span>底妆</span></li><br>
	                <li class="li9">
						<span>眼妆</span></li><br>
	                <li class="li10">
						<span>工具</span></li><br>
					<li class="ul2">
						
					</li>
	            </ul>
				<span class="iconfont icon-close"></span>
	        </div>
	        <div class="box box3">
	            <ul>
	                <li><span>当季活动</span></li><br>
	                <li><span>臻享礼盒</span></li><br>
	                <li><span>畅销榜单</span></li><br>
	                <li><span>护肤理念</span></li><br>
	                <li><span>新品上市</span></li><br>
	            </ul>
				<span class="iconfont icon-close"></span>
	        </div>
	    </nav>          
	</div>
	
	
	<!-- 登录 -->
	<div class="login">
		<div class="trigle"></div>
		<span class="iconfont icon-close"></span>
		<div class="logAll">
			<div class="logMain">
			    <div class="loginWrap">
			        <div class="left">
			            <h1>已注册用户登录</h1>
			            <form action="" id="login_form">
			                <div class="loginForm">
			                    <div class="formRow">
			                        <span>您的邮箱/手机</span>
			                        <span class="required">*</span>
									<span id="1" style="padding-left: 10px;"></span>
			                        <br>
			                        <input type="text" id="userTel" name="userTel" autocomplete="off" class="inputText">
			                    </div>
			                    <div class="formRow">
			                        <span>密码</span>
			                        <span class="required">*</span>
									<span id="2" style="padding-left: 10px;"></span>
			                        <br>
			                        <input type="password" id="userpass" name="userpass" class="inputText">
			                    </div>
								<div id="messageBox"></div>
			                    <div class="rememberme">
			                        <div class="formRow formRow1">
			                            <label for="" class="formCheck">
			                                <input type="checkbox" id="remPass">
			                            </label>
			                            <span>记住我</span>
			                        </div>
			                        <div class="forget">
			                            <a href="#">忘记密码？</a>
			                        </div>
			                    </div>
			                    <div class="formRow">
			                        <button type="button" id="btnLogin" class="primary large data-field">登录</button>
			                    </div>
			                   
			                    <div class="loginOauth">
			                        <p>使用合作网站账号登录</p>
			                        <ul>
			                            <li>
			                                <a href="#"></a>
			                                <span class="iconfont icon-we-chat"></span>
			                            </li>
			                            <li>
			                                <a href="#"></a>
			                                <span class="iconfont icon-weibo"></span>
			                            </li>
			                            <li>
			                                <a href="#"></a>
			                                <span class="iconfont icon-xiaohongshu"></span>
			                            </li>
			                        </ul>
			                    </div>
			                </div>
			            </form>
			        </div>
			        <div class="right">
			            <h1>新用户注册</h1>
			            <span>注册即可尊享：</span>
			            <div class="accountWrap">
			                <span>-&nbsp;&nbsp;官网专属礼遇</span><br>
			                <span>-&nbsp;&nbsp;最新活动资讯</span><br>
			                <span>-&nbsp;&nbsp;收藏您喜爱的产品、文章</span>
			            </div>
						<a href="register.html" class="button">注册</a>
			        </div>
			    </div>
			</div>
		</div>
	</div>
	
	<!-- 登录成功 -->
	<div class="success">
		<h3>
			<span id="myName">name</span>
			<span class="iconfont icon-close"></span>
		</h3>
		<div class="trigle"></div>
		<ul class="user_link">
			<li>
				<a href="">我的账户</a>
			</li>
			<li>
				<a href="">我的订单</a>
			</li>
			<li>
				<a href="">我的收藏</a>
			</li>
			<li>
				<a href="">账户设置</a>
			</li>
			<li>
				<a href="">我的积分</a>
			</li>
			<li>
				<a href="" id="logout">
					<span class="iconfont icon-arrow-right"></span>
					登出
				</a>
			</li>
			
		</ul>
	</div>
</body>
</html>
<!-- <script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script> -->
<!-- <script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.js"></script> -->
<script src="js/nav.js"></script>

<!-- 导航条 -->
<script>
	var h = 0,t=0;
	$(document).scroll(function(){
		h = $(document).scrollTop();
		
		setTimeout(function(){ t=h; },0);
		if((h<t) && (h>650)){
			$(".navMain").css({
				position:'fixed',
				top:'0',
				zIndex:'99'
			});
		}else if(h<650){
			$(".navMain").css({
				position:'relative'
			})
		}else{
			$(".navMain").css({
				position:'relative'
			})
		}		
	})
	//手机号判断
	$("#login_form #userTel").blur(function(){
		let r=/^1[3,5,7,8,9]\d{9}$/;
		if($(this).val()==""){
		    $("#1").css({'color':'#c8102e','font-size':'12px',fontSize:'14px'});
		    $("#1").text("请输入一个有效的电话号码");
			$("#btnLogin").attr({'disabled':'disabled'}).css({background:'#666',borderColor:'#666'})
			.hover().css({color:'white'});
		    }else{
		        $("#1").text("");
			$(this).css({border:'1px solid #ccc'});
			$("#btnLogin").removeAttr('disabled').css({background:'black',color:'white'}).hover(function(){
				$(this).css({background:'white',color:'black'});
			},function(){
				$(this).css({background:'black',color:'white'});
			})
		    }
		if (r.test($(this).val())){
		}else{
			$("#userTel").css({border:"1px solid #c8102e"})
		    $("#1").css({'color':'#c8102e','font-size':'14px'});
		    $("#1").text("请输入一个有效的电话号码");
			$("#btnLogin").attr({'disabled':'disabled'}).css({background:'#666',borderColor:'#666'})
			.hover().css({color:'white'});
		}
	})
	//密码判断
	$("#login_form #userpass").blur(function(){
		if($(this).val()==""){
			$("#2").css({'color':'#c8102e','font-size':'12px',fontSize:'14px'});
			$("#2").text("请输入一个有效的密码");
			$(this).css({border:'1px solid #c8102e'});
			$("#btnLogin").attr({'disabled':'disabled'}).css({background:'#666',borderColor:'#666'})
			.hover().css({color:'white'});
		}else{
			$("#2").text("");
			$(this).css({border:'1px solid #ccc'});
			$("#btnLogin").removeAttr('disabled').css({background:'black',color:'white'}).hover(function(){
				$(this).css({background:'white',color:'black'});
			},function(){
				$(this).css({background:'black',color:'white'});
			})
			
		}
	})
	
	//登陆
	$('#btnLogin').click(function(){
		var isChecked = $("#remPass").is(":checked");//选中时为true,未选中时为false/
		
		if(isChecked == true){
			
				let xhr = new XMLHttpRequest();		        
				xhr.open("post","checkout.php",true);					
				xhr.onreadystatechange = function(){
					if(xhr.readyState==4 && xhr.status==200){
						if(xhr.responseText=="1"){
							$.cookie('userTel',$('#login_form #userTel').val(),{expires:7,path:'/'});
							window.location.href="index.html";
						}else{
							$("input").css({border:'1px solid #c8102e'});
							$(".loginForm #messageBox").html("用户名或者密码错误");
						}
					}
				}
				//post方式：设置请求头
				xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
				//post方式：把传给服务器端数据（键值对）放在send函数的参数里。
				let sendstr = `userTel=${$("#login_form #userTel").val()}&userpass=${$("#login_form #userpass").val()}`;
				xhr.send(sendstr);
		}else{
			let xhr = new XMLHttpRequest();		        
				xhr.open("post","checkout.php",true);					
				xhr.onreadystatechange = function(){
					if(xhr.readyState==4 && xhr.status==200){
						if(xhr.responseText=="1"){
							$.cookie('userTel',$('#login_form #userTel').val());
							window.location.href="index.html";
						}else{
							$("input").css({border:'1px solid #c8102e'});
							$("#.loginForm  #messageBox").html("用户名或者密码错误");
						}
					}
				}
				//post方式：设置请求头
				xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
				//post方式：把传给服务器端数据（键值对）放在send函数的参数里。
				let sendstr = `userTel=${$("#login_form #userTel").val()}&userpass=${$("#login_form #userpass").val()}`;
				xhr.send(sendstr);
		}
	});
	
	// 登录成功
	function showUser(){
	 //    let userTel = $.cookie('userTel');
		// console.log($.cookie('userTel').value);
	    if($.cookie('userTel')!=null){
			$(".login_hover").hover(function(){
				$(".success").show();
	        $("#myName").html($.cookie('userTel'));
			});
			$(".success").hover(function(){
			},function(){
				$(".success").hide();
			})
	    }else{
			$(".login_hover").hover(function(){
				$(".login").show();
			});
			$(".login").hover(function(){
			},function(){
				$(".login").hide();
			})
	    }
	}
	//登出
	$(function(){
		showUser();
		$("#logout").click(function(){
			// $.removeCookie('userTel',{path:'/'});
			$.cookie("userTel", "", {expires: -1,path:'/Shiseido'});
			showUser();
		})
	})
	
	//鼠标滑过出现登录页面
	// $(".login_hover").hover(function(){
	// 	$(".login").css({display:'block'});
	// });
	// $(".login").hover(function(){
	// },function(){
	// 	$(".login").css({display:'none'});
	// })
	// $(".login .icon-close").click(function(){
	// 	$(".login").css({display:'none'});
	// })
</script>

<!-- 关闭nav -->
<script>
	$(function(){
		$(".icon-close").click(function(){
			$(".box,.success").css({display: 'none'})
		})
	})
	
</script>